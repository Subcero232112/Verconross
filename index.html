<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosmicWave - Comparte contenido en sincronía</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBoxhLAxA3Lgq_L_ztW8MXvj5zhbhOOyB8",
            authDomain: "ross-9301b.firebaseapp.com",
            projectId: "ross-9301b",
            storageBucket: "ross-9301b.firebasestorage.app",
            messagingSenderId: "120661854127",
            appId: "1:120661854127:web:cbe011f5358a6ef8fa915a",
            measurementId: "G-LJWD2K1EPY"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);

        window.firebaseInstances = { auth, db };
    </script>
</head>
<body>
    <div class="stars" id="stars"></div>

    <nav class="navbar">
        <div class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24">
                <defs>
                    <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#7303c0" />
                        <stop offset="100%" stop-color="#ec38bc" />
                    </linearGradient>
                </defs>
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z"/>
            </svg>
            CosmicWave
        </div>
        <div class="nav-links">
            <a href="#features" class="nav-link">Características</a>
            <a href="#preview" class="nav-link">Vista Previa</a>
        </div>
        <div class="auth-section">
            <div class="auth-buttons" id="authButtons">
                <button class="btn btn-login" id="loginBtn">Iniciar Sesión</button>
                <button class="btn btn-signup" id="signupBtn">Registrarse</button>
            </div>
            <div class="user-info" id="userInfo">
                <img id="userAvatar" src="https://i.imgur.com/8Km9tLL.png" alt="Avatar">
                <span id="userName">Usuario</span>
                <button class="btn btn-logout" id="logoutBtn">Salir</button>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="cosmic-orb orb-1"></div>
        <div class="cosmic-orb orb-2"></div>
        <h1 class="hero-title">Ve videos y escucha música en sincronía con amigos</h1>
        <p class="hero-subtitle">CosmicWave te permite disfrutar de contenido multimedia junto a tus amigos en tiempo real, sin importar dónde se encuentren. Mira películas, series o videos y chatea con ellos en un ambiente cósmico y único.</p>
        <div class="hero-buttons">
            <button class="btn btn-signup btn-hero" id="createRoomBtn">Crear Sala</button>
            <button class="btn btn-login btn-hero" id="joinRoomBtn">Unirse a Sala</button>
        </div>
    </section>

    <section class="features" id="features">
        <div class="feature-card">
            <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"/></svg></div>
            <h3 class="feature-title">Sincronización Perfecta</h3>
            <p class="feature-desc">Disfruta de películas, videos y música perfectamente sincronizados con todos los participantes, sin desfases ni retrasos.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/></svg></div>
            <h3 class="feature-title">Chat en Vivo</h3>
            <p class="feature-desc">Comenta cada momento con un chat interactivo y reacciona en tiempo real a lo que estás viendo con tus amigos.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></div>
            <h3 class="feature-title">Múltiples Fuentes</h3>
            <p class="feature-desc">Comparte contenido desde YouTube, Google Drive y más, todo en un solo lugar.</p>
        </div>
    </section>

    <section class="app-preview" id="preview">
        <h2 class="preview-title">Una Experiencia Cósmica</h2>
        <p class="preview-subtitle">Interfaz intuitiva y elegante diseñada para que disfrutes al máximo tus momentos compartidos con amigos y familiares.</p>
        <div class="preview-image">
            <div class="device-mockup">
                <div class="mockup-content"></div>
            </div>
        </div>
    </section>

    <section class="cta">
        <div class="cta-container">
            <div class="cta-bg"></div>
            <h2 class="cta-title">¿Listo para la experiencia cósmica?</h2>
            <p class="cta-subtitle">Regístrate ahora y comienza a compartir momentos inolvidables con tus amigos desde cualquier lugar del universo.</p>
            <button class="btn btn-signup btn-hero" id="ctaSignupBtn">Empieza Ahora</button>
        </div>
    </section>

    <footer class="footer">
        <div class="copyright">
            © 2024 CosmicWave. Todos los derechos reservados.
        </div>
    </footer>

    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <div class="modal-close" id="closeAuthModal">×</div>
            <div id="authModalContent"></div>
        </div>
    </div>

    <div class="modal-overlay" id="createRoomModal">
        <div class="modal">
            <div class="modal-close" id="closeCreateRoomModal">×</div>
            <h2 class="modal-title">Crear Nueva Sala</h2>
            <div class="create-room-form">
                <div class="input-group">
                    <label class="input-label" for="roomNameInput">Nombre de la Sala</label>
                    <input type="text" class="input-field" id="roomNameInput" placeholder="Mi sala de cine cósmica">
                </div>
                <div class="room-options">
                    <div class="option-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="privateRoomToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Sala Privada (Próximamente)</span>
                    </div>
                    <div class="option-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="onlyHostControlsToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Solo anfitrión controla reproducción</span>
                    </div>
                </div>
                <div class="modal-tabs">
                    <div class="modal-tab active" data-tab="youtube">YouTube</div>
                    <div class="modal-tab" data-tab="drive">Google Drive</div>
                    <div class="modal-tab" data-tab="screen" disabled>Pantalla</div>
                </div>
                <div class="modal-tab-content active" id="youtube-tab">
                    <div class="url-input-container">
                        <div class="url-type-selector">YouTube</div>
                        <input type="text" class="media-input" id="youtubeUrlInput" placeholder="Pega un enlace de YouTube">
                    </div>
                </div>
                <div class="modal-tab-content" id="drive-tab">
                    <div class="url-input-container">
                        <div class="url-type-selector">Drive</div>
                        <input type="text" class="media-input" id="driveUrlInput" placeholder="Pega enlace directo de Google Drive">
                    </div>
                    <p style="font-size: 0.8rem; color: rgba(255,255,255,0.5); margin-top: 5px;">Nota: Requiere enlace directo al video.</p>
                </div>
                <div class="modal-tab-content" id="screen-tab">
                    <p style="text-align: center; color: rgba(255,255,255,0.7);">Compartir pantalla estará disponible pronto.</p>
                </div>
                <p class="error-message" id="createRoomError"></p>
                <button class="btn btn-signup btn-modal" id="createRoomConfirmBtn">Crear Sala</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="joinRoomModal">
        <div class="modal">
            <div class="modal-close" id="closeJoinRoomModal">×</div>
            <h2 class="modal-title">Unirse a Sala</h2>
            <div class="input-group">
                <label class="input-label" for="roomCodeInput">Código de la sala</label>
                <input type="text" class="input-field" id="roomCodeInput" placeholder="Ingresa el código" maxlength="6">
            </div>
            <p class="error-message" id="joinRoomError"></p>
            <button class="btn btn-signup btn-modal" id="joinRoomConfirmBtn">Unirse</button>
        </div>
    </div>

    <div class="room-container" id="roomContainer">
        <div class="room-header">
            <div class="room-title">
                <span id="currentRoomName">Cargando...</span>
                <span class="room-id" id="roomIdDisplay" title="Copiar ID de Sala">ID: ------</span>
            </div>
            <div class="room-actions">
                <button class="btn btn-invite" id="inviteBtn">Invitar (Copiar ID)</button>
                <button class="btn btn-leave" id="leaveRoomBtn">Salir de la Sala</button>
            </div>
        </div>
        <div class="room-content">
            <div class="player-wrapper" id="playerWrapper">
                <div id="youtubePlayer"></div>
                <video id="html5Player" controlslist="nodownload noremoteplayback" disablepictureinpicture></video>
                <div class="player-controls" id="playerControls">
                    <button class="control-btn" id="playPauseBtn" title="Reproducir/Pausar">
                        <svg viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7L8 5z"/> </svg>
                    </button>
                    <div class="time-display" id="timeDisplay">0:00 / 0:00</div>
                    <div class="timeline" id="videoTimeline" title="Buscar en video">
                        <div class="timeline-progress" id="timelineProgress"></div>
                        <div class="timeline-handle" id="timelineHandle"></div>
                    </div>
                    <div class="volume-control">
                        <button class="control-btn" id="muteBtn" title="Silenciar/Activar Sonido">
                            <svg viewBox="0 0 24 24" id="muteIcon"> <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                            </svg>
                        </button>
                        <div class="volume-slider" id="volumeSlider" title="Control de Volumen">
                            <div class="volume-level" id="volumeLevel"></div>
                        </div>
                    </div>
                    <button class="control-btn" id="micBtn" title="Activar/Desactivar Micrófono (Próximamente)">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="cameraBtn" title="Activar/Desactivar Cámara (Próximamente)">
                        <svg viewBox="0 0 24 24">
                            <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="screenShareBtn" disabled title="Compartir Pantalla (Próximamente)">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H1c-.55 0-1 .45-1 1s.45 1 1 1h22c.55 0 1-.45 1-1s-.45-1-1-1h-3zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="fullscreenBtn" title="Pantalla Completa">
                        <svg viewBox="0 0 24 24">
                            <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="chat-container">
                <div class="chat-header">Chat de la Sala</div>
                <div class="chat-messages-container" id="chatMessages">
                    <div class="message received">
                        <div class="message-user">Sistema</div>
                        <div class="message-text">¡Bienvenido! Los mensajes aparecerán aquí.</div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input-field" id="chatInput" placeholder="Escribe tu mensaje..." maxlength="500">
                    <button class="btn-send" id="sendMessageBtn" disabled>Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="notificationContainer" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 2000;"></div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
